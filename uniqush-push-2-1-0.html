<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Uniqush Blog - Release 2.1.0</title>
    <meta name="description" content="">
    <meta name="author" content="Monnand">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/uniqush-blog/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/uniqush-blog/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/local.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="http://blog.uniqush.org/feeds/all.atom.xml" rel="alternate" title="Uniqush Blog" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="http://blog.uniqush.org">Uniqush Blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>Release 2.1.0</h1>
Wed 09 March 2016

by <a class="url fn" href="http://blog.uniqush.org/author/misha-nasledov.html">Misha Nasledov</a>
 


        </div>
	
        <div><p>Please check out our <a href="http://uniqush.org/release-notes/rn-uniqush-push-2-1-0.html">release notes</a> for version 2.1.0.</p>
<p>New APIs have been added: one for listing the subscriptions of a subscriber and
another for showing the configurations of the push service providers for services that
exist.</p>
<p>Concurrency issues in ADM and APNS have been fixed. The APNS implementation
has been changed to use a new, reliable worker pool implementation.</p>
<p>This implementation has been running reliably at production scale, at a company named
<em>if(we)</em>, sending push notifications for the Tagged and hi5 social networks
for a while now (nearly a year at time of writing).
The company has 12 processes handling a peak of 60 APNS push notifications per second,
and the tier is overprovisioned in order to be able to deal with
traffic increases and potential surges. That's about 5 APNS push notifications
per process per second. In addition, <em>if(we)</em> sends about 270 GCM push notifications
per second distributed amongst these same processes, which adds about another
22 GCM push notifications per second each process sends. The subscribe API
on the tier ends up getting hit about 500 times per second (about 42 queries
per process per second). So, each process is handling about 70 queries a second
easily. <em>if(we)</em> has been running without any issues for many months, especially after
fixing some bugs that eventually manifested only at their scale.</p>
<p>A bug which could lead to infinite loops in rare circumstances has been fixed.</p>
<p>The APNS implementation no longer uses Go's default HTML escaping of JSON
payloads. The APNS servers now render payloads with characters such as '"'
properly.</p>
<p>More details have been added to error messages so that problems can be
debugged more easily.</p>
<p>The APNS implementation has also been updated to deal with 100-byte APNS
device tokens (previously 32-bytes) which Apple said it would roll out in 2016.</p></div>
	
        <hr>

<a href="https://twitter.com/share" class="twitter-share-button" data-text="Release 2.1.0" data-via="uniqush">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        <h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'uniqushblog'; 
    var disqus_title = 'Release 2.1.0';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="http://blog.uniqush.org/archives.html">Archives</a>
                <li><a href="http://blog.uniqush.org/tags.html">Tags</a>



                <li><a href="http://blog.uniqush.org/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="http://blog.uniqush.org/category/dev.html">dev</a></li>
                <li><a href="http://blog.uniqush.org/category/misc.html">misc</a></li>
                <li><a href="http://blog.uniqush.org/category/news.html">news</a></li>
                <li><a href="http://blog.uniqush.org/category/plan.html">plan</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://uniqush.org">uniqush.org</a></li>
                <li><a href="https://github.com/uniqush">uniqush on github</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://twitter.com/uniqush">twitter</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="http://blog.uniqush.org">Uniqush Blog</a> &copy; Monnand 2016</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/uniqush-blog/theme/bootstrap-collapse.js"></script>
 
</body>
</html>