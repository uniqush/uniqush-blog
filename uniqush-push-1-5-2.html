<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Uniqush Blog - Release 1.5.2</title>
    <meta name="description" content="">
    <meta name="author" content="Monnand">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="/uniqush-blog/theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/uniqush-blog/theme/bootstrap.min.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/local.css" rel="stylesheet">
    <link href="/uniqush-blog/theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="/uniqush-blog/feeds/all.atom.xml" rel="alternate" title="Uniqush Blog" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="http://blog.uniqush.org">Uniqush Blog</a>

        <div class="nav-collapse">
        <ul class="nav">
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>Release 1.5.2</h1>
Sun 29 June 2014

by <a class="url fn" href="/uniqush-blog/author/monnand.html">Monnand</a>
 


        </div>
	
        <div><p><em>TL;DR</em>: Please checkout our <a href="http://uniqush.org/release-notes/rn-uniqush-push-1-5-2.html">release note</a> for version 1.5.2.</p>
<p>Sorry for my absence since November 2013. I was preparing other things and
working on other projects. During this period, I received several bug reports
related to <a href="http://github.com/uniqush/uniqush-push">uniqush-push</a>. Some of them indicating some large service is
currently using uniqush-push as their backend push service, while some of them
contains very weird log messages which I did not expect. It is really exciting
for me to see <a href="http://github.com/uniqush/uniqush-push">uniqush-push</a> working on top of user base with millions of
users. But it is so disappointed that I was not able to quickly found the root
cause of all bugs.</p>
<p>Fortunately, it seems that most bugs are related to the APNS' waiting time
calculation. When a push operation failed, <a href="http://github.com/uniqush/uniqush-push">uniqush-push</a> will wait for some
time before retry. It will announce a failure after 3 attempts. The waiting
time is increased for each attempt. The way we used to calculate the waiting
time was to square the previous waiting time. The problem is that we represent
time period in terms of nanoseconds. Squaring it quickly leads to an integer
overflow. This is why lots of logs in bug reports contains some negative
waiting times.</p>
<p>There's also a potential problem with deterministic waiting times: It may leads
to message storm. Imagine you want to send one million message at same time and
some of them will fail. Because all of the failed messages will be resent after
the same period, it leads to another spike of network usage, which may lead to
failure as well. An easy fix is to wait for a random amount of time.</p>
<p>In 1.5.2, <a href="http://github.com/uniqush/uniqush-push">uniqush-push</a> will randomly increase the waiting time before every
resend of a message. This should fix most bug report I received. But I did not
confirmed this with every reporter yet. If you have any other issues with the
most recent version, please <a href="https://github.com/uniqush/uniqush-push/issues/new">report a
bug</a>.</p></div>
	
        <hr>

<a href="https://twitter.com/share" class="twitter-share-button" data-text="Release 1.5.2" data-via="uniqush">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        <h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'uniqushblog'; 
    var disqus_title = 'Release 1.5.2';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="/uniqush-blog/archives.html">Archives</a>
                <li><a href="/uniqush-blog/tags.html">Tags</a>



                <li><a href="/uniqush-blog/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="/uniqush-blog/category/dev.html">dev</a></li>
                <li><a href="/uniqush-blog/category/misc.html">misc</a></li>
                <li><a href="/uniqush-blog/category/news.html">news</a></li>
                <li><a href="/uniqush-blog/category/plan.html">plan</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="http://uniqush.org">uniqush.org</a></li>
                <li><a href="https://github.com/uniqush">uniqush on github</a></li>
            </ul>
            </div>


            <div class="social">
            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Social
                </li>
           
                <li><a href="https://twitter.com/uniqush">twitter</a></li>
            </ul>
            </div>
            </div>

        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="http://blog.uniqush.org">Uniqush Blog</a> &copy; Monnand 2016</p>
</footer>

</div> <!-- /container -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/uniqush-blog/theme/bootstrap-collapse.js"></script>
 
</body>
</html>